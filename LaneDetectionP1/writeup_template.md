# **Finding Lane Lines on the Road** 

---

The goals of this project are the following:
* Make a pipeline that finds lane lines on the road
* Reflect on how the pipeline can be improved


[//]: # (Image References)

[solidWhiteCurve]: ./test_images_out/solidWhiteCurve.jpg "Result"
[solidWhiteRight]: ./test_images_out/solidWhiteRight.jpg "Result"
[solidYellowCurve]: ./test_images_out/solidYellowCurve.jpg "Result"
[solidYellowCurve2]: ./test_images_out/solidYellowCurve2.jpg "Result"
[solidYellowLeft]: ./test_images_out/solidYellowLeft.jpg "Result"
[whiteCarLaneSwitch]: ./test_images_out/whiteCarLaneSwitch.jpg "Result"

---

### Reflection

### 1. Description of the pipeline

My pipeline consisted of the following steps:
1. Start by extracting the Grayscale version of the image
2. Perform a Gaussian Blur with a kernel of size 15 to remove noise 
3. Run the Canny Detection Algorithm and extract the edges of maximum gradient, using a high threshold of 120 and low threshold of 70.
4. Cut to the region of interest based on the height and width values.
5. Run the Hough Transform and process the output lines. A large value for the max_line gap was used to detect the dotted white lanes (70), as well as a large value for the min_line length to avoid short lines in the picture.

In order to draw a single line on the left and right lanes, I followed the below procedure:
1. I modified the **draw_lines()** function to distinguish between the left and right lines generated by the Hough transform. This was done by evaluating the slope of each line, keeping the negatively sloped lines separate from the positively sloped ones.
2. I then gather all the points in each set and fit a polynomial of degree 1 for each. This will give me 2 equations, one for each lane
3. After that, I compute the intersecting point between the two lines. This is simply done by finding the point (x,y) that fits both equations y = x * m_1 + b_1 and y = x * m_2 + b_2. 
4. Finally, for each equation, I find the 2 points located at position y = height (bottom of the picture) and draw a line from each point to the intersect point. These two lines will represent my left and right lane. I do a final cut over the region of interest to remove the upper part of those lines, arriving at a good approximation of both lanes in the promixity.

Find below the various pictures generated through the pipeline for each of the input image examples:

#### solidWhiteCurve.jpg  
![alt text][solidWhiteCurve]  

#### solidWhiteRight.jpg  
![alt text][solidWhiteRight]  

#### solidYellowCurve.jpg  
![alt text][solidYellowCurve]  

#### solidYellowCurve2.jpg  
![alt text][solidYellowCurve2]  

#### solidYellowLeft.jpg  
![alt text][solidYellowLeft]  

#### whiteCarLaneSwitch.jpg  
![alt text][whiteCarLaneSwitch]  


### 2.  Potential Shortcomings with Current Pipeline

There are several potential shortcomings: 

1. The Region of Interest is fixed in terms of the proportion of the height and width of the pictures, and depends on the level of zooming in the camera. If the scene appears farther away, more information will come into the picture and more lines will be detected by canny/hough transform.
2. The lines are currently assumed to be fairly vertical and horizontal lines are filtered out. Further more, the model of a lane is a linear equation rather than a polynomial one. Thus curves in the road lanes and left/right turns will not be well captured.
3. The Canny Edge Detector parameters are fixed and will need to be adjusted for different lighting conditions as the pixel intensities will be different. Thus with the current values we might not detecting lanes in darker environments where the gradient values are smaller.
4. The Hough Transform's parameter may not capture all of lanes marking, for example dottet line may have different amount of separation.
5. The presence of cars in front of the camera and in the same lane could be a problem as it may lead the Hough transform function to generate many more lines.

### 3. Possible Improvements to the Pipeline

The following is a list of possible improvements:
1. One would be to fit the data using a quadratic line rather than a linear one. This will better match lanes at turns.  
2. To deal with different lightening conditions, we could anchor the parameters of the canny edge detector to the overall mean and variance of all the pixels values.  
3. A smoothing mechanism should be introduced to avoid large changes in the lanes markings when moving from 1 picture frame to the next. This should help stabilize the output. 


